(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chat"],{"1dde":function(t,e,n){var c=n("d039"),o=n("b622"),a=n("2d00"),i=o("species");t.exports=function(t){return a>=51||!c((function(){var e=[],n=e.constructor={};return n[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"293a":function(t,e,n){"use strict";n.r(e);var c=n("7a23"),o={key:0,class:"kaiwa"},a={class:"kaiwa-img-right"},i={class:"kaiwa-text-left"},r={class:"kaiwa-text"};function s(t,e,n,s,u,f){return Object(c["t"])(),Object(c["g"])("div",null,[Object(c["j"])(c["c"],{name:"fade"},{default:Object(c["H"])((function(){return[u.chatShow?(Object(c["t"])(),Object(c["g"])("div",o,[Object(c["j"])("figure",a,[Object(c["j"])("img",{src:u.avatar,alt:"no-img2"},null,8,["src"])]),Object(c["j"])("div",i,[Object(c["j"])("p",r,Object(c["D"])(u.chat||"..."),1)])])):Object(c["h"])("",!0)]})),_:1})])}n("99af");var u=n("8055"),f=n.n(u),l={name:"chat",components:{},data:function(){return{chat:"",chatShow:!1,chatShowTimer:null,socket:null,isSpeech:!1,avatar:"https://i.loli.net/2021/08/01/SFHndyel1UJx6wL.png",cloudSel:"aliyun",appkey:"",AccessToken:"",voice:"xiaoyun"}},computed:{},watch:{},methods:{playVoice:function(){if(this.isSpeech){var t="https://nls-gateway.cn-shanghai.aliyuncs.com/stream/v1/tts?appkey=".concat(this.appkey,"&token=").concat(this.AccessToken,"&text=").concat(encodeURI(this.chat),"&format=mp3&sample_rate=16000&voice=").concat(this.voice),e=new Audio(t);e.play()}},toSocket:function(){var t=this;this.socket=f.a.connect("/socketchat"),this.socket.on("msg",(function(e){console.log(e),t.chat=e.message,t.$nextTick((function(){t.chatShow=!0,t.playVoice()})),clearTimeout(t.chatShowTimer),t.chatShowTimer=setTimeout((function(){t.chatShow=!1}),1e3*t.chat.length)})),this.socket.on("getSettingData",(function(e){console.log(e),t.isSpeech=!!e.isSpeech,t.avatar=e.avatar||"https://i.loli.net/2021/08/01/SFHndyel1UJx6wL.png",t.cloudSel=e.cloudSel||"aliyun",t.appkey=e.appkey||"",t.AccessToken=e.AccessToken||"",t.voice=e.voice||"xiaoyun"})),this.socket.on("connect",(function(){console.log("已连接")})),this.socket.on("disconnect",(function(){console.log("已断开")}))}},created:function(){this.toSocket()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeUnmount:function(){this.socket.close()},unmounted:function(){},activated:function(){}};n("602c");l.render=s;e["default"]=l},"602c":function(t,e,n){"use strict";n("806f")},"65f0":function(t,e,n){var c=n("861d"),o=n("e8b5"),a=n("b622"),i=a("species");t.exports=function(t,e){var n;return o(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?c(n)&&(n=n[i],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"806f":function(t,e,n){},8418:function(t,e,n){"use strict";var c=n("c04e"),o=n("9bf2"),a=n("5c6c");t.exports=function(t,e,n){var i=c(e);i in t?o.f(t,i,a(0,n)):t[i]=n}},"99af":function(t,e,n){"use strict";var c=n("23e7"),o=n("d039"),a=n("e8b5"),i=n("861d"),r=n("7b0b"),s=n("50c4"),u=n("8418"),f=n("65f0"),l=n("1dde"),h=n("b622"),d=n("2d00"),p=h("isConcatSpreadable"),v=9007199254740991,b="Maximum allowed index exceeded",k=d>=51||!o((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),y=l("concat"),w=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:a(t)},m=!k||!y;c({target:"Array",proto:!0,forced:m},{concat:function(t){var e,n,c,o,a,i=r(this),l=f(i,0),h=0;for(e=-1,c=arguments.length;e<c;e++)if(a=-1===e?i:arguments[e],w(a)){if(o=s(a.length),h+o>v)throw TypeError(b);for(n=0;n<o;n++,h++)n in a&&u(l,h,a[n])}else{if(h>=v)throw TypeError(b);u(l,h++,a)}return l.length=h,l}})},e8b5:function(t,e,n){var c=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==c(t)}}}]);
//# sourceMappingURL=chat.07b23be9.js.map