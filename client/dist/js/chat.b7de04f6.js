(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chat"],{"1dde":function(t,e,o){var c=o("d039"),n=o("b622"),a=o("2d00"),i=n("species");t.exports=function(t){return a>=51||!c((function(){var e=[],o=e.constructor={};return o[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"293a":function(t,e,o){"use strict";o.r(e);var c=o("7a23"),n={key:0,class:"kaiwa"},a={class:"kaiwa-img-right"},i={class:"kaiwa-text-left"},r={class:"kaiwa-text"};function s(t,e,o,s,u,f){return Object(c["t"])(),Object(c["g"])("div",null,[Object(c["j"])(c["c"],{name:"fade"},{default:Object(c["H"])((function(){return[u.chatShow?(Object(c["t"])(),Object(c["g"])("div",n,[Object(c["j"])("figure",a,[Object(c["j"])("img",{src:u.avatar,alt:"no-img2"},null,8,["src"])]),Object(c["j"])("div",i,[Object(c["j"])("p",r,Object(c["D"])(u.chat||"..."),1)])])):Object(c["h"])("",!0)]})),_:1})])}o("99af");var u=o("8055"),f=o.n(u),l={name:"chat",components:{},data:function(){return{chat:"",chatShow:!1,chatShowTimer:null,socket:null,isSpeech:!1,avatar:"https://i.loli.net/2021/08/01/SFHndyel1UJx6wL.png",cloudSel:"googleNiang",appkey:"",AccessToken:"",voice:"xiaoyun"}},computed:{},watch:{},methods:{playVoice:function(t){if(this.isSpeech){var e="";switch(this.cloudSel){case"aliyun":e="https://nls-gateway.cn-shanghai.aliyuncs.com/stream/v1/tts?appkey=".concat(this.appkey,"&token=").concat(this.AccessToken,"&text=").concat(encodeURI(this.chat),"&format=mp3&sample_rate=16000&voice=").concat(this.voice);break;case"googleNiang":e=t;break;case"googleCloud":e=t;break;default:break}if(e){var o=new Audio(e);o.load(),o.play()}}},toSocket:function(){var t=this;this.socket=f.a.connect("/socketchat"),this.socket.on("msg",(function(e){console.log(e),t.chat=e.message,t.$nextTick((function(){t.chatShow=!0,t.playVoice(e.voiceUrl)})),clearTimeout(t.chatShowTimer),t.chatShowTimer=setTimeout((function(){t.chatShow=!1}),1e3*t.chat.length)})),this.socket.on("getSettingData",(function(e){console.log(e),t.isSpeech=!!e.isSpeech,t.avatar=e.avatar||"https://i.loli.net/2021/08/01/SFHndyel1UJx6wL.png",t.cloudSel=e.cloudSel||"googleNiang",t.appkey=e.appkey||"",t.AccessToken=e.AccessToken||"",t.voice=e.voice||"xiaoyun"})),this.socket.on("connect",(function(){console.log("已连接")})),this.socket.on("disconnect",(function(){console.log("已断开")}))}},created:function(){this.toSocket()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeUnmount:function(){this.socket.close()},unmounted:function(){},activated:function(){}};o("d22f");l.render=s;e["default"]=l},"65f0":function(t,e,o){var c=o("861d"),n=o("e8b5"),a=o("b622"),i=a("species");t.exports=function(t,e){var o;return n(t)&&(o=t.constructor,"function"!=typeof o||o!==Array&&!n(o.prototype)?c(o)&&(o=o[i],null===o&&(o=void 0)):o=void 0),new(void 0===o?Array:o)(0===e?0:e)}},8418:function(t,e,o){"use strict";var c=o("c04e"),n=o("9bf2"),a=o("5c6c");t.exports=function(t,e,o){var i=c(e);i in t?n.f(t,i,a(0,o)):t[i]=o}},"99af":function(t,e,o){"use strict";var c=o("23e7"),n=o("d039"),a=o("e8b5"),i=o("861d"),r=o("7b0b"),s=o("50c4"),u=o("8418"),f=o("65f0"),l=o("1dde"),h=o("b622"),d=o("2d00"),p=h("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",b=d>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),k=l("concat"),w=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:a(t)},y=!b||!k;c({target:"Array",proto:!0,forced:y},{concat:function(t){var e,o,c,n,a,i=r(this),l=f(i,0),h=0;for(e=-1,c=arguments.length;e<c;e++)if(a=-1===e?i:arguments[e],w(a)){if(n=s(a.length),h+n>g)throw TypeError(v);for(o=0;o<n;o++,h++)o in a&&u(l,h,a[o])}else{if(h>=g)throw TypeError(v);u(l,h++,a)}return l.length=h,l}})},c5a1:function(t,e,o){},d22f:function(t,e,o){"use strict";o("c5a1")},e8b5:function(t,e,o){var c=o("c6b6");t.exports=Array.isArray||function(t){return"Array"==c(t)}}}]);
//# sourceMappingURL=chat.b7de04f6.js.map